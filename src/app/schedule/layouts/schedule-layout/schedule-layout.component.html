<!-- <mwl-calendar-month-view [viewDate]='viewDate' [events]='events'></mwl-calendar-month-view> -->

<div class="container">
  <db-page-title>Twój terminarz</db-page-title>

  <db-schedule-header [(view)]="view" [(viewDate)]="viewDate"></db-schedule-header>

  <div [ngSwitch]="view">
    <mwl-calendar-month-view
      *ngSwitchCase="'month'"
      [viewDate]="viewDate"
      [events]="events"
      [locale]="locale"
      [weekStartsOn]="weekStartsOn"
      [weekendDays]="weekendDays"
      [activeDayIsOpen]="activeDayIsOpen"
      (dayClicked)="dayClicked($event.day)">
    </mwl-calendar-month-view>
    <mwl-calendar-week-view
      *ngSwitchCase="'week'"
      [viewDate]="viewDate"
      [events]="events"
      [locale]="locale"
      [weekStartsOn]="weekStartsOn"
      [weekendDays]="weekendDays">
    </mwl-calendar-week-view>
    <mwl-calendar-day-view
      *ngSwitchCase="'day'"
      [viewDate]="viewDate"
      [events]="events"
      [locale]="locale">
    </mwl-calendar-day-view>
  </div>

  <br><br><br>

<h3 class="d-flex justify-content-between align-items-center">
  Edytuj wydarzenia
  <button mat-raised-button color="primary" (click)="addEvent()"> Dodaj </button>
</h3>

<table mat-table [dataSource]="events" class="w-100">

  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef> Nazwa </th>
    <td mat-cell *matCellDef="let element">
      <mat-form-field>
        <input matInput type="text"
          [(ngModel)]="element.title"
          (keyup)="refresh.next()">
      </mat-form-field>
    </td>
  </ng-container>

  <ng-container matColumnDef="color">
    <th mat-header-cell *matHeaderCellDef> Kolor </th>
    <td mat-cell *matCellDef="let element">
      <input type="color"
             [(ngModel)]="element.color.primary"
             (change)="refresh.next()"> </td>
  </ng-container>

  <ng-container matColumnDef="start">
    <th mat-header-cell *matHeaderCellDef> Rozpoczęcie </th>
    <td mat-cell *matCellDef="let element">
      <mat-form-field floatLabel="never">
        <input matInput placeholder="Start time"
          [(ngModel)]="element.start"
          [owlDateTime]="dt3"
          [owlDateTimeTrigger]="dt3"
          (ngModelChange)="refresh.next()">
        <owl-date-time [pickerMode]="'dialog'" #dt3></owl-date-time>
      </mat-form-field>
    </td>
  </ng-container>

  <ng-container matColumnDef="end">
    <th mat-header-cell *matHeaderCellDef> Zakończenie </th>
    <td mat-cell *matCellDef="let element">
      <mat-form-field floatLabel="never">
        <input matInput placeholder="End time"
               [(ngModel)]="element.end"
               [owlDateTime]="dt3"
               [owlDateTimeTrigger]="dt3"
               (ngModelChange)="refresh.next()">
        <owl-date-time [pickerMode]="'dialog'" #dt3></owl-date-time>
      </mat-form-field>
    </td>
  </ng-container>

  <ng-container matColumnDef="remove">
    <th mat-header-cell *matHeaderCellDef> Usuń </th>
    <td mat-cell *matCellDef="let element">
      <button mat-button color="warn" (click)="events.splice(2, 1); refresh.next()">
        Delete
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

</table>


</div>
